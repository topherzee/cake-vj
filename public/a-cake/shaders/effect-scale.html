<!DOCTYPE html>
<!-- https://github.com/patriciogonzalezvivo/glslCanvas?tab=readme-ov-file -->
<html>
    <head>
        <meta charset="utf-8">
        <title>GlslCanvas</title>

        <script type="text/javascript" src="https://rawgit.com/patriciogonzalezvivo/glslCanvas/master/dist/GlslCanvas.js"></script>

        <style>
            body {
                background: #101515;
            }
            #glslCanvas {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%,-50%);
            }â€‹
        </style>
        <script src="/live.js"></script> 
    </head>

    <body>

        <canvas id="glslCanvas" data-fragment="

#ifdef GL_ES
    precision mediump float;
#endif

uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;
uniform sampler2D u_tex0; //squirrel
uniform sampler2D u_tex1; //face

void main() {

// gl_FragCoord.xy; is 640x480
// u_resolution.xy is 640x480
/* vec2 uv = gl_FragCoord.xy; */
vec2 uv = gl_FragCoord.xy/u_resolution.xy - 0.5; // 0 to 1
/* uv.x *= u_resolution.x/u_resolution.y; */

float scale = 5.0; //shrink.
uv.x += 0.5;
/* uv.y -= (0.5); */
uv *= scale;

/* uv.x += 1.0 / scale/2.0;
uv.y += 1.0 / scale/2.0; */

vec4 pixelColor = texture2D(u_tex0, vec2(uv.x + 0.5, uv.y + 0.5)); 
gl_FragColor = vec4(pixelColor);	

float radius = 0.1;
float x = 0.1;
float y = 0.5;



/* if(mask_circle(uv, radius, x, y) || mask_circle(uv, radius, 1.33-0.1, y)) {
    vec4 pixelColor = texture2D(u_tex0, vec2(uv.x, uv.y)); 
    gl_FragColor = vec4(pixelColor);	
}else{
    gl_FragColor = vec4(0.0, 0.0, 0.3, 1.0);	
} */



/* st.x *= 0.75; //TODO -needs to be done per image eventually. */

/* float fader = 0.5;

vec2 pos = vec2(0.5 / fader, 0.5 / fader);
pos = vec2(0.0, 0.0);

float x = st.x / fader;
float y = st.y / fader;
vec2 scaled_xy = vec2(x -pos.x , y - pos.y);  */

/* scaled_xy.x *= 0.75; */
/* scaled_xy.y = clamp(scaled_xy.y, 0.0, 1.0); */

/* gl_FragColor = texture2D(u_tex0, scaled_xy); */

/* gl_FragColor = texture2D(u_tex0, st); */


/* gl_FragColor = vec4(1.0,.0,.0,.0); */
/* 
// sample texture and output to screen
// gl_FragColor = texture2D(u_tex0, st)* st.x + texture2D(u_tex1, st) * (1.0 - st.x);

vec3 color = vec3(0.);
color = vec3(st.x,st.y,abs(sin(u_time)));

gl_FragColor = vec4(color,1.0); */
}

" width="640px" height="480px" data-textures="/images/animal.png,/images/smily1.png" ></canvas>

    </body>

    <script>
        var canvas = document.getElementById("glslCanvas");
        var sandbox = new GlslCanvas(canvas);

        canvas.style.width = '640px';
        canvas.style.height = '480px';

    </script>

</html>